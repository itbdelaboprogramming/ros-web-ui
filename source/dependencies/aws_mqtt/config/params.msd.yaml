# YAML alias for MQTT SSL version.
# The supported values are defined at:
# https://github.com/eclipse/paho.mqtt.cpp/blob/master/src/mqtt/ssl_options.h#L305
tls_1_2: &tls_1_2 3

broker:
  # YOU MUST CHANGE THIS ENDPOINT
  # Can be found by executing: aws iot describe-endpoint --endpoint-type iot:Data-ATS
  host: a2zm5irlkrubgi-ats.iot.ap-southeast-1.amazonaws.com
  port: 8883
  tls:
    enabled: true
    # Available at https://www.amazontrust.com/repository/AmazonRootCA1.pem
    # ca_certificate: ${PKG_PATH}/certs/AmazonCA.pem
client:
  id: user_msd
  # Whether or not to start a clean session with each reconnect.
  # If True, the server will forget all subscriptions with each reconnect.
  # Set False to request that the server resume an existing session or start
  # a new session that may be resumed after a connection loss.
  clean_session: false
  # The keep alive value, in seconds, to send in CONNECT packet.
  keep_alive_interval: 6.0
  tls:
    # The certificate generated by the AWS IoT Core service
    # certificate: ${PKG_PATH}/certs/cert.pem
    # The private key generated by the AWS IoT Core service
    # key: ${PKG_PATH}/certs/private.pem
    # AWS uses TLS v1.2 to encrypt all communication.
    version: *tls_1_2
    verify: true
    # https://www.openssl.org/docs/man1.1.1/man3/SSL_CTX_set_alpn_protos.html
    alpn_protos:
      # MQTT over AWS IOT requires an ALPN protocol negotiation.
      # https://docs.aws.amazon.com/iot/latest/developerguide/protocols.html
      - x-amzn-mqtt-ca
  buffer:
    enabled: true
bridge:
  # NOTE: It seems that AWS IOT only supports primitive topics. Using non-primitive
  # types results in the error message Connection to broker lost, will try to reconnect...
  ros2mqtt:
    - ros_topic: /string/robotpose
      mqtt_topic: /string/robotpose
      primitive: true
    - ros_topic: /string/move_base/result
      mqtt_topic: /string/move_base/result
      primitive: true
    - ros_topic: /string/map
      mqtt_topic: /string/map
      primitive: true
  mqtt2ros:
    - mqtt_topic: /string/move_base/goal
      ros_topic: /string/move_base/goal
      primitive: true
    - mqtt_topic: /string/move_base/cancel
      ros_topic: /string/move_base/cancel
      primitive: true
    - mqtt_topic: /itbdelabo/unit1/system_command
      ros_topic: /system_command
      primitive: true

    - mqtt_topic: /string/mappingInstruc
      ros_topic: /string/mappingInstruc
      primitive: true
    - mqtt_topic: /map_saver/save_set_map
      ros_topic: /map_saver/save_set_map
      primitive: true
    